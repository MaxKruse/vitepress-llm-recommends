import{_ as ge,h as n,x as L,c as i,o as v,j as o,e as N,n as s,ag as z,ah as H,G as j,H as K,t as d,ai as fe,O as X,a as he}from"./framework.CuQK53I8.js";const _e="_modelSelector_1y9gd_2",be="_modelSelectorRecommendedSuccess_1y9gd_26",Se="_modelSelectorRecommendedCaution_1y9gd_29",Me="_modelSelectorRecommendedWarning_1y9gd_32",$e="_modelSelectorNotRecommended_1y9gd_35",Ge="_modelSelectorGlow_1y9gd_39",Be="_modelSelectorNoMatch_1y9gd_43",Ne="_h3_1y9gd_47",Re="_controls_1y9gd_54",Ce="_controlGroup_1y9gd_61",we="_controlGroupLabel_1y9gd_67",xe="_controlGroupSelect_1y9gd_74",Ie="_contextControlGroup_1y9gd_96",ke="_contextControlLabel_1y9gd_103",Ae="_contextSliderContainer_1y9gd_110",Ve="_contextSliderWrapper_1y9gd_116",Fe="_contextSlider_1y9gd_110",Te="_contextValueDisplay_1y9gd_163",We="_result_1y9gd_177",Le="_resultStrong_1y9gd_182",ze="_modelName_1y9gd_189",Oe="_modelNameNotRecommended_1y9gd_200",Ue="_modelNameRecommendedSuccess_1y9gd_208",Qe="_modelNameRecommendedCaution_1y9gd_214",De="_modelNameRecommendedWarning_1y9gd_220",Pe="_modelNameRecommended4b_1y9gd_226",qe="_modelNameGlow_1y9gd_232",Ee="_modelNameNoMatch_1y9gd_236",He="_details_1y9gd_240",je="_memorySection_1y9gd_246",Ke="_memoryBarContainer_1y9gd_252",Xe="_memoryBarLabel_1y9gd_256",Ze="_legend_1y9gd_264",Je="_legendItem_1y9gd_272",Ye="_legendColor_1y9gd_278",et="_contextDetails_1y9gd_284",tt="_memoryWarningBox_1y9gd_298",ot="_memoryTable_1y9gd_306",lt="_warning_1y9gd_355",nt="_modelContainer_1y9gd_365",at="_lmstudioButton_1y9gd_372",st={modelSelector:_e,modelSelectorRecommendedSuccess:be,modelSelectorRecommendedCaution:Se,modelSelectorRecommendedWarning:Me,modelSelectorNotRecommended:$e,modelSelectorGlow:Ge,modelSelectorNoMatch:Be,h3:Ne,controls:Re,controlGroup:Ce,controlGroupLabel:we,controlGroupSelect:xe,contextControlGroup:Ie,contextControlLabel:ke,contextSliderContainer:Ae,contextSliderWrapper:Ve,contextSlider:Fe,contextValueDisplay:Te,result:We,resultStrong:Le,modelName:ze,modelNameNotRecommended:Oe,modelNameRecommendedSuccess:Ue,modelNameRecommendedCaution:Qe,modelNameRecommendedWarning:De,modelNameRecommended4b:Pe,modelNameGlow:qe,modelNameNoMatch:Ee,details:He,memorySection:je,memoryBarContainer:Ke,memoryBarLabel:Xe,legend:Ze,legendItem:Je,legendColor:Ye,contextDetails:et,memoryWarningBox:tt,memoryTable:ot,"memory-type-header":"_memory-type-header_1y9gd_344","memory-value":"_memory-value_1y9gd_350",warning:lt,modelContainer:nt,lmstudioButton:at},rt=["for"],ut=["id"],dt=["value"],mt=["for"],ct=["id"],it=["value"],vt=["max"],yt=["href"],pt=.9,gt={__name:"ModelSelector",props:{modelDefinitions:{type:Array,default:()=>[{ramMin:64,vramMin:16,models:[{"Qwen3 Coder 30B A3B Instruct":{parameters:30,quantization:"BF16"}}],usefulness:1},{ramMin:32,vramMin:16,models:[{"Qwen3 Coder 30B A3B Instruct":{parameters:30,quantization:"Q8_K_XL"}}],usefulness:.7},{ramMin:32,vramMin:6,models:[{"Qwen3 Coder 30B A3B Instruct":{parameters:30,quantization:"Q6_K_XL"}}],usefulness:.5},{ramMin:16,vramMin:4,models:[{"Qwen3 4B Instruct 2507":{parameters:4,quantization:"F16"}}],usefulness:.3}]},ramOptions:{type:Array,default:()=>[16,32,64,128]},vramOptions:{type:Array,default:()=>[0,4,6,8,12,16,24,32]}},setup(Z){const J={"Qwen3 4B Instruct 2507":"unsloth/Qwen3-4B-Instruct-2507-GGUF","Qwen3 4B Thinking 2507":"unsloth/Qwen3-4B-Thinking-2507-GGUF","Qwen3 30B Instruct 2507":"unsloth/Qwen3-30B-A3B-Instruct-2507-GGUF","Qwen3 30B Thinking 2507":"unsloth/Qwen3-30B-A3B-Thinking-2507-GGUF","Qwen3 Coder 30B A3B Instruct":"unsloth/Qwen3-Coder-30B-A3B-Instruct-GGUF","Mistral Small 3.2":"unsloth/Mistral-Small-3.2-24B-Instruct-2506-GGUF","GPT OSS 20B":"openai/gpt-oss-20b","GPT OSS 120B":"openai/gpt-oss-120b","Gemma 3 12B":"unsloth/gemma-3-12b-it-GGUF","Gemma 3 27B":"unsloth/gemma-3-27b-it-GGUF"},O=n(()=>{if(!a.value.details)return null;const e=a.value.model,t=J[e];if(!t)return null;const[l,r]=t.split("/");return`lmstudio://open_from_hf?model=${l}/${r}`}),T=Z,y=L(16),p=L(8),h=L(16384),Y=n(()=>T.modelDefinitions),a=n(()=>{const e=Y.value.find(t=>y.value>=t.ramMin&&p.value>=t.vramMin);if(e){let l=function(m,f){const B=f&&typeof f.parameters=="number",M=f?.quantization;return!B||!M?`${m} (unknown)`:m.match(/\d+B/)?`${m} (${M})`:`${m} ${f.parameters}B (${M})`};const t=e.models.map(m=>{const f=Object.keys(m)[0],B=m[f];return{name:f,details:B}});let r=t[0]||{name:"Unknown",details:null},c=-1/0;for(const m of t){const f=m.details?.parameters??0,B=m.details?.quantization??"",M=Q(f,B,!0,m.name);M>c&&(c=M,r=m)}const u=ee(e.usefulness),g=t.filter(m=>m.name!==r.name).map(m=>l(m.name,m.details));return{model:r.name,formattedModel:l(r.name,r.details),plausibleModels:g,details:r.details,usefulness:e.usefulness,borderColor:u,color:"var(--vp-c-text-1)",bg:"var(--vp-c-bg-soft)",hasGlow:e.usefulness===1||e.usefulness===0}}return{model:"Not recommended",formattedModel:"Not recommended",plausibleModels:[],details:null,usefulness:0,borderColor:"var(--vp-c-red-2)",color:"var(--vp-c-text-3)",bg:"var(--vp-c-bg-soft)",hasGlow:!0}});function ee(e){const t=Math.max(0,Math.min(1,e));let l;if(t===1)l="var(--vp-c-green-2)";else if(t===0)l="var(--vp-c-red-2)";else if(t<.5){const r=t*2,c=255,u=Math.round(204*r);l=`rgb(${c}, ${u}, 0)`}else{const r=(t-.5)*2,c=Math.round(255*(1-r)),u=Math.round(204+51*r);l=`rgb(${c}, ${u}, 0)`}return l}const U=n(()=>a.value.model!=="Not recommended"),R=n(()=>U.value?a.value.usefulness===1?{recommendedSuccess:!0}:a.value.usefulness>=.5?{recommendedCaution:!0}:{recommendedWarning:!0}:{notRecommended:!0}),C=n(()=>U.value?a.value.usefulness===1?{recommendedSuccess:!0}:a.value.usefulness>=.5?{recommendedCaution:!0}:{recommendedWarning:!0}:{notRecommended:!0});function te(e){if(e.includes("BF16")||e.includes("F16"))return 16;const t=e.match(/Q([1-8])_K_XL/);return t?parseInt(t[1])*1.25:0}function oe(e){return e?/mistral\s*small\s*3\.2/i.test(e)||/gemma\s*3/i.test(e):!1}function Q(e,t,l=!0,r=""){const c=te(t);let u=e*(c/8);return oe(r)&&(u+=pt),l&&(u=u+D()),u}function D(){let l=4096,r=.25;for(;l<h.value;)l*=1.5,r*=1.5;return r}function le(e){return e>=64?16:e>=32?12:e>=16?8:0}const ne=n(()=>1.5),ae=n(()=>le(y.value)),w=n(()=>a.value.details?Q(a.value.details.parameters,a.value.details.quantization,!1,a.value.model):0),x=n(()=>D()),I=n(()=>ne.value),W=n(()=>ae.value),_=n(()=>w.value===0?0:w.value/24),b=n(()=>a.value.details&&p.value>=I.value+x.value?x.value:0),$=n(()=>a.value.details&&b.value===0?x.value:0),se=n(()=>Math.max(0,p.value-I.value-b.value)),re=n(()=>Math.max(0,y.value-W.value-$.value)),ue=n(()=>Math.floor(se.value/_.value)),de=n(()=>Math.floor(re.value/_.value)),k=n(()=>Math.ceil(w.value/_.value)),G=n(()=>k.value===0?0:Math.min(ue.value,k.value)*_.value),A=n(()=>{if(k.value===0)return 0;const e=G.value/_.value,t=k.value-e;return Math.min(de.value,t)*_.value}),V=n(()=>I.value+b.value+G.value),F=n(()=>W.value+$.value+A.value),me=n(()=>Math.max(0,p.value-V.value)),ce=n(()=>Math.max(0,y.value-F.value)),P=n(()=>V.value>p.value),q=n(()=>F.value>y.value),ie=n(()=>{const e=G?G.value:0;return(Number(e)||0).toFixed(2)}),ve=n(()=>{const e=A?A.value:0;return(Number(e)||0).toFixed(2)}),ye=n(()=>{const e=b?b.value:0;return(Number(e)||0).toFixed(2)}),pe=n(()=>{const e=$?$.value:0;return(Number(e)||0).toFixed(2)});n(()=>{const e=V?V.value:0;return(Number(e)||0).toFixed(2)}),n(()=>{const e=F?F.value:0;return(Number(e)||0).toFixed(2)}),n(()=>{const e=p.value||1,t=I.value/e*100,l=b.value/e*100,r=G.value/e*100,c=t,u=t+l,g=u+r;return{background:`linear-gradient(
      to right,
      var(--vp-c-blue-2) 0% ${c}%,
      var(--vp-c-purple-2) ${c}% ${u}%,
      var(--vp-c-orange-2) ${u}% ${g}%,
      var(--vp-c-gray-3) ${g}% 100%
    )`,height:"20px",borderRadius:"4px",width:"100%"}}),n(()=>{const e=y.value||1,t=W.value/e*100,l=$.value/e*100,r=A.value/e*100,c=t,u=t+l,g=u+r;return{background:`linear-gradient(
      to right,
      var(--vp-c-blue-2) 0% ${c}%,
      var(--vp-c-purple-2) ${c}% ${u}%,
      var(--vp-c-orange-2) ${u}% ${g}%,
      var(--vp-c-gray-3) ${g}% 100%
    )`,height:"20px",borderRadius:"4px",width:"100%"}});const S=n(()=>[1,2,4,8,12,16,22,28,32].map(t=>t*1024)),E=n({get(){let e=0,t=Math.abs(S.value[0]-h.value);for(let l=1;l<S.value.length;l++){const r=Math.abs(S.value[l]-h.value);r<t&&(t=r,e=l)}return e},set(e){const t=Math.max(0,Math.min(e,S.value.length-1));h.value=S.value[t]}});return(e,t)=>(v(),i("div",{class:s([e.$style.modelSelector,R.value.recommendedSuccess?e.$style.modelSelectorRecommendedSuccess:"",R.value.recommendedCaution?e.$style.modelSelectorRecommendedCaution:"",R.value.recommendedWarning?e.$style.modelSelectorRecommendedWarning:"",R.value.notRecommended?e.$style.modelSelectorNotRecommended:"",a.value.hasGlow&&a.value.usefulness===1?e.$style.modelSelectorGlow:"",a.value.hasGlow&&a.value.usefulness===0?e.$style.modelSelectorNoMatch:""]),style:X({borderColor:a.value.borderColor})},[o("div",{class:s(e.$style.controls)},[o("div",{class:s(e.$style.controlGroup)},[o("label",{for:`ram-select-${Math.random()}`,class:s(e.$style.controlGroupLabel)},"RAM (GB)",10,rt),z(o("select",{id:`ram-select-${Math.random()}`,"onUpdate:modelValue":t[0]||(t[0]=l=>y.value=l),class:s(e.$style.controlGroupSelect)},[(v(!0),i(j,null,K(T.ramOptions,l=>(v(),i("option",{key:l,value:l},d(l),9,dt))),128))],10,ut),[[H,y.value,void 0,{number:!0}]])],2),o("div",{class:s(e.$style.controlGroup)},[o("label",{for:`vram-select-${Math.random()}`,class:s(e.$style.controlGroupLabel)},"VRAM (GB)",10,mt),z(o("select",{id:`vram-select-${Math.random()}`,"onUpdate:modelValue":t[1]||(t[1]=l=>p.value=l),class:s(e.$style.controlGroupSelect)},[(v(!0),i(j,null,K(T.vramOptions,l=>(v(),i("option",{key:l,value:l},d(l),9,it))),128))],10,ct),[[H,p.value,void 0,{number:!0}]])],2),o("div",{class:s(e.$style.contextControlGroup)},[o("label",{class:s(e.$style.contextControlLabel)},"Context Size: "+d(h.value)+" tokens",3),o("div",{class:s(e.$style.contextSliderContainer)},[o("div",{class:s(e.$style.contextSliderWrapper)},[z(o("input",{type:"range",min:0,max:S.value.length-1,"onUpdate:modelValue":t[2]||(t[2]=l=>E.value=l),class:s(e.$style.contextSlider)},null,10,vt),[[fe,E.value,void 0,{number:!0}]])],2)],2)],2)],2),o("div",{class:s(e.$style.result)},[o("strong",{class:s(e.$style.resultStrong)},"Recommended model:",2),o("span",{class:s([e.$style.modelName,C.value.recommendedSuccess?e.$style.modelNameRecommendedSuccess:"",C.value.recommendedCaution?e.$style.modelNameRecommendedCaution:"",C.value.recommendedWarning?e.$style.modelNameRecommendedWarning:"",C.value.notRecommended?e.$style.modelNameNotRecommended:"",a.value.hasGlow&&a.value.usefulness===1?e.$style.modelNameGlow:"",a.value.hasGlow&&a.value.usefulness===0?e.$style.modelNameNoMatch:""]),style:X({backgroundColor:a.value.bg,color:a.value.color,borderColor:a.value.borderColor})},d(a.value.formattedModel||a.value.model),7),O.value?(v(),i("a",{key:0,href:O.value,target:"_blank",class:s(e.$style.lmstudioButton)}," Use in LMStudio ",10,yt)):N("",!0),a.value.plausibleModels&&a.value.plausibleModels.length>0?(v(),i("div",{key:1,class:s(e.$style.details)},[o("small",null,"Also considered: "+d(a.value.plausibleModels.join(", ")),1)],2)):N("",!0),a.value.details?(v(),i("div",{key:2,class:s(e.$style.details)},[o("small",null," Parameters: "+d(a.value.details.parameters?a.value.details.parameters+"B":"(unknown)")+" | Quantization: "+d(a.value.details.quantization?a.value.details.quantization.toUpperCase():"(unknown)")+" | Model Memory Impact: "+d(w.value.toFixed(1))+" GB ",1)],2)):N("",!0)],2),a.value.details?(v(),i("div",{key:0,class:s(e.$style.contextDetails)},[t[3]||(t[3]=o("strong",null,"Context Overhead:",-1)),he(" "+d(x.value.toFixed(2))+"GB (based on "+d(h.value.toLocaleString())+" token context) ",1),t[4]||(t[4]=o("br",null,null,-1)),t[5]||(t[5]=o("small",null,'Note: The size of context in GB is an estimate that shows the "worst case". It may be smaller in actual use, but is assumed to be higher for safely assessing upper bounds.',-1))],2)):N("",!0),a.value.details?(v(),i("div",{key:1,class:s([e.$style.memorySection,P.value||q.value?e.$style.memoryWarningBox:""])},[o("table",{class:s(e.$style.memoryTable)},[o("thead",null,[o("tr",null,[o("th",{class:s(e.$style.memoryTypeHeader)},null,2),t[6]||(t[6]=o("th",null,"Total",-1)),t[7]||(t[7]=o("th",null,"Context",-1)),t[8]||(t[8]=o("th",null,"Model",-1)),t[9]||(t[9]=o("th",null,"Leftover",-1))])]),o("tbody",null,[o("tr",null,[o("td",{class:s(e.$style.memoryTypeHeader)},"RAM",2),o("td",{class:s(e.$style.memoryValue)},d((Number(y.value)||0).toFixed(2))+"GB",3),o("td",{class:s(e.$style.memoryValue)},d(pe.value)+"GB",3),o("td",{class:s(e.$style.memoryValue)},d(ve.value)+"GB",3),o("td",{class:s([e.$style.memoryValue,q.value?e.$style.warning:""])},d((Number(ce.value)||0).toFixed(2))+"GB",3)]),o("tr",null,[o("td",{class:s(e.$style.memoryTypeHeader)},"VRAM",2),o("td",{class:s(e.$style.memoryValue)},d((Number(p.value)||0).toFixed(2))+"GB",3),o("td",{class:s(e.$style.memoryValue)},d(ye.value)+"GB",3),o("td",{class:s(e.$style.memoryValue)},d(ie.value)+"GB",3),o("td",{class:s([e.$style.memoryValue,P.value?e.$style.warning:""])},d((Number(me.value)||0).toFixed(2))+"GB",3)])])],2)],2)):N("",!0)],6))}},ft={$style:st},bt=ge(gt,[["__cssModules",ft]]);export{bt as M};
