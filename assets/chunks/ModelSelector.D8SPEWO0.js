import{_ as fe,h as a,x as L,c as i,o as v,j as l,e as $,n as s,ag as z,ah as j,G as K,H as X,t as d,ai as he,O as Z,a as J}from"./framework.CuQK53I8.js";const _e="_modelSelector_1y9gd_2",be="_modelSelectorRecommendedSuccess_1y9gd_26",Se="_modelSelectorRecommendedCaution_1y9gd_29",Me="_modelSelectorRecommendedWarning_1y9gd_32",$e="_modelSelectorNotRecommended_1y9gd_35",Ge="_modelSelectorGlow_1y9gd_39",Be="_modelSelectorNoMatch_1y9gd_43",Ne="_h3_1y9gd_47",Re="_controls_1y9gd_54",Ce="_controlGroup_1y9gd_61",we="_controlGroupLabel_1y9gd_67",xe="_controlGroupSelect_1y9gd_74",ke="_contextControlGroup_1y9gd_96",Ie="_contextControlLabel_1y9gd_103",Ae="_contextSliderContainer_1y9gd_110",Ve="_contextSliderWrapper_1y9gd_116",Fe="_contextSlider_1y9gd_110",Te="_contextValueDisplay_1y9gd_163",We="_result_1y9gd_177",Le="_resultStrong_1y9gd_182",ze="_modelName_1y9gd_189",Oe="_modelNameNotRecommended_1y9gd_200",Ue="_modelNameRecommendedSuccess_1y9gd_208",Qe="_modelNameRecommendedCaution_1y9gd_214",De="_modelNameRecommendedWarning_1y9gd_220",Pe="_modelNameRecommended4b_1y9gd_226",qe="_modelNameGlow_1y9gd_232",Ee="_modelNameNoMatch_1y9gd_236",He="_details_1y9gd_240",je="_memorySection_1y9gd_246",Ke="_memoryBarContainer_1y9gd_252",Xe="_memoryBarLabel_1y9gd_256",Ze="_legend_1y9gd_264",Je="_legendItem_1y9gd_272",Ye="_legendColor_1y9gd_278",eo="_contextDetails_1y9gd_284",oo="_memoryWarningBox_1y9gd_298",to="_memoryTable_1y9gd_306",lo="_warning_1y9gd_355",no="_modelContainer_1y9gd_365",ao="_lmstudioButton_1y9gd_372",so={modelSelector:_e,modelSelectorRecommendedSuccess:be,modelSelectorRecommendedCaution:Se,modelSelectorRecommendedWarning:Me,modelSelectorNotRecommended:$e,modelSelectorGlow:Ge,modelSelectorNoMatch:Be,h3:Ne,controls:Re,controlGroup:Ce,controlGroupLabel:we,controlGroupSelect:xe,contextControlGroup:ke,contextControlLabel:Ie,contextSliderContainer:Ae,contextSliderWrapper:Ve,contextSlider:Fe,contextValueDisplay:Te,result:We,resultStrong:Le,modelName:ze,modelNameNotRecommended:Oe,modelNameRecommendedSuccess:Ue,modelNameRecommendedCaution:Qe,modelNameRecommendedWarning:De,modelNameRecommended4b:Pe,modelNameGlow:qe,modelNameNoMatch:Ee,details:He,memorySection:je,memoryBarContainer:Ke,memoryBarLabel:Xe,legend:Ze,legendItem:Je,legendColor:Ye,contextDetails:eo,memoryWarningBox:oo,memoryTable:to,"memory-type-header":"_memory-type-header_1y9gd_344","memory-value":"_memory-value_1y9gd_350",warning:lo,modelContainer:no,lmstudioButton:ao},ro=["for"],uo=["id"],mo=["value"],co=["for"],io=["id"],vo=["value"],yo=["max"],po={key:0,style:{"font-weight":"bolder","background-color":"rgba(250, 250, 0, 0.5)"}},go=["href"],fo=1.8,ho={__name:"ModelSelector",props:{modelDefinitions:{type:Array,default:()=>[{ramMin:64,vramMin:16,models:[{"Qwen3 Coder 30B A3B Instruct":{parameters:30,quantization:"BF16"}}],usefulness:1},{ramMin:32,vramMin:16,models:[{"Qwen3 Coder 30B A3B Instruct":{parameters:30,quantization:"Q8_K_XL"}}],usefulness:.7},{ramMin:32,vramMin:6,models:[{"Qwen3 Coder 30B A3B Instruct":{parameters:30,quantization:"Q6_K_XL"}}],usefulness:.5},{ramMin:16,vramMin:4,models:[{"Qwen3 4B Instruct 2507":{parameters:4,quantization:"F16"}}],usefulness:.3}]},ramOptions:{type:Array,default:()=>[16,32,64,128]},vramOptions:{type:Array,default:()=>[0,4,6,8,12,16,24,32]}},setup(Y){const ee={"Qwen3 4B Instruct 2507":"unsloth/Qwen3-4B-Instruct-2507-GGUF","Qwen3 4B Thinking 2507":"unsloth/Qwen3-4B-Thinking-2507-GGUF","Qwen3 30B Instruct 2507":"unsloth/Qwen3-30B-A3B-Instruct-2507-GGUF","Qwen3 30B Thinking 2507":"unsloth/Qwen3-30B-A3B-Thinking-2507-GGUF","Qwen3 Coder 30B A3B Instruct":"unsloth/Qwen3-Coder-30B-A3B-Instruct-GGUF","Mistral Small 3.2":"unsloth/Mistral-Small-3.2-24B-Instruct-2506-GGUF","GPT OSS 20B":"openai/gpt-oss-20b","GPT OSS 120B":"openai/gpt-oss-120b","Gemma 3 12B":"unsloth/gemma-3-12b-it-GGUF","Gemma 3 27B":"unsloth/gemma-3-27b-it-GGUF"},O=a(()=>{if(!n.value.details)return null;const e=n.value.model,o=ee[e];if(!o)return null;const[t,r]=o.split("/");return`lmstudio://open_from_hf?model=${t}/${r}`}),T=Y,y=L(16),p=L(8),h=L(16384),oe=a(()=>T.modelDefinitions),n=a(()=>{const e=oe.value.find(o=>y.value>=o.ramMin&&p.value>=o.vramMin);if(e){let t=function(m,f){const N=f&&typeof f.parameters=="number",M=f?.quantization;return!N||!M?`${m} (unknown)`:m.match(/\d+B/)?`${m} (${M})`:`${m} ${f.parameters}B (${M})`};const o=e.models.map(m=>{const f=Object.keys(m)[0],N=m[f];return{name:f,details:N}});let r=o[0]||{name:"Unknown",details:null},c=-1/0;for(const m of o){const f=m.details?.parameters??0,N=m.details?.quantization??"",M=D(f,N,!0,m.name);M>c&&(c=M,r=m)}const u=te(e.usefulness),g=o.filter(m=>m.name!==r.name).map(m=>t(m.name,m.details));return{model:r.name,formattedModel:t(r.name,r.details),plausibleModels:g,details:r.details,usefulness:e.usefulness,borderColor:u,color:"var(--vp-c-text-1)",bg:"var(--vp-c-bg-soft)",hasGlow:e.usefulness===1||e.usefulness===0}}return{model:"Not recommended",formattedModel:"Not recommended",plausibleModels:[],details:null,usefulness:0,borderColor:"var(--vp-c-red-2)",color:"var(--vp-c-text-3)",bg:"var(--vp-c-bg-soft)",hasGlow:!0}});function te(e){const o=Math.max(0,Math.min(1,e));let t;if(o===1)t="var(--vp-c-green-2)";else if(o===0)t="var(--vp-c-red-2)";else if(o<.5){const r=o*2,c=255,u=Math.round(204*r);t=`rgb(${c}, ${u}, 0)`}else{const r=(o-.5)*2,c=Math.round(255*(1-r)),u=Math.round(204+51*r);t=`rgb(${c}, ${u}, 0)`}return t}const U=a(()=>n.value.model!=="Not recommended"),R=a(()=>U.value?n.value.usefulness===1?{recommendedSuccess:!0}:n.value.usefulness>=.5?{recommendedCaution:!0}:{recommendedWarning:!0}:{notRecommended:!0}),C=a(()=>U.value?n.value.usefulness===1?{recommendedSuccess:!0}:n.value.usefulness>=.5?{recommendedCaution:!0}:{recommendedWarning:!0}:{notRecommended:!0});function le(e){if(e.includes("BF16")||e.includes("F16"))return 16;const o=e.match(/Q([1-8])_K_XL/);if(o){const t=parseInt(o[1]);return parseFloat(t*1.25)}return 0}function Q(e){return e?/mistral\s*small\s*3\.2/i.test(e)||/gemma\s*3/i.test(e):!1}function D(e,o,t=!0,r=""){const c=le(o);let u=e*(c/8);return Q(r)&&(u+=fo),t&&(u=u+P()),u}function P(){let t=4096,r=.25;for(;t<h.value;)t*=1.5,r*=1.5;return r}function ne(e){return e>=64?16:e>=32?12:e>=16?8:0}const ae=a(()=>1.5),se=a(()=>ne(y.value)),w=a(()=>n.value.details?D(n.value.details.parameters,n.value.details.quantization,!1,n.value.model):0),x=a(()=>P()),k=a(()=>ae.value),W=a(()=>se.value),_=a(()=>w.value===0?0:w.value/24),b=a(()=>n.value.details&&p.value>=k.value+x.value?x.value:0),G=a(()=>n.value.details&&b.value===0?x.value:0),re=a(()=>Math.max(0,p.value-k.value-b.value)),ue=a(()=>Math.max(0,y.value-W.value-G.value)),de=a(()=>Math.floor(re.value/_.value)),me=a(()=>Math.floor(ue.value/_.value)),I=a(()=>Math.ceil(w.value/_.value)),B=a(()=>I.value===0?0:Math.min(de.value,I.value)*_.value),A=a(()=>{if(I.value===0)return 0;const e=B.value/_.value,o=I.value-e;return Math.min(me.value,o)*_.value}),V=a(()=>k.value+b.value+B.value),F=a(()=>W.value+G.value+A.value),ce=a(()=>Math.max(0,p.value-V.value)),ie=a(()=>Math.max(0,y.value-F.value)),q=a(()=>V.value>p.value),E=a(()=>F.value>y.value),ve=a(()=>{const e=B?B.value:0;return(Number(e)||0).toFixed(2)}),ye=a(()=>{const e=A?A.value:0;return(Number(e)||0).toFixed(2)}),pe=a(()=>{const e=b?b.value:0;return(Number(e)||0).toFixed(2)}),ge=a(()=>{const e=G?G.value:0;return(Number(e)||0).toFixed(2)});a(()=>{const e=V?V.value:0;return(Number(e)||0).toFixed(2)}),a(()=>{const e=F?F.value:0;return(Number(e)||0).toFixed(2)}),a(()=>{const e=p.value||1,o=k.value/e*100,t=b.value/e*100,r=B.value/e*100,c=o,u=o+t,g=u+r;return{background:`linear-gradient(
      to right,
      var(--vp-c-blue-2) 0% ${c}%,
      var(--vp-c-purple-2) ${c}% ${u}%,
      var(--vp-c-orange-2) ${u}% ${g}%,
      var(--vp-c-gray-3) ${g}% 100%
    )`,height:"20px",borderRadius:"4px",width:"100%"}}),a(()=>{const e=y.value||1,o=W.value/e*100,t=G.value/e*100,r=A.value/e*100,c=o,u=o+t,g=u+r;return{background:`linear-gradient(
      to right,
      var(--vp-c-blue-2) 0% ${c}%,
      var(--vp-c-purple-2) ${c}% ${u}%,
      var(--vp-c-orange-2) ${u}% ${g}%,
      var(--vp-c-gray-3) ${g}% 100%
    )`,height:"20px",borderRadius:"4px",width:"100%"}});const S=a(()=>[1,2,4,8,12,16,22,28,32].map(o=>o*1024)),H=a({get(){let e=0,o=Math.abs(S.value[0]-h.value);for(let t=1;t<S.value.length;t++){const r=Math.abs(S.value[t]-h.value);r<o&&(o=r,e=t)}return e},set(e){const o=Math.max(0,Math.min(e,S.value.length-1));h.value=S.value[o]}});return(e,o)=>(v(),i("div",{class:s([e.$style.modelSelector,R.value.recommendedSuccess?e.$style.modelSelectorRecommendedSuccess:"",R.value.recommendedCaution?e.$style.modelSelectorRecommendedCaution:"",R.value.recommendedWarning?e.$style.modelSelectorRecommendedWarning:"",R.value.notRecommended?e.$style.modelSelectorNotRecommended:"",n.value.hasGlow&&n.value.usefulness===1?e.$style.modelSelectorGlow:"",n.value.hasGlow&&n.value.usefulness===0?e.$style.modelSelectorNoMatch:""]),style:Z({borderColor:n.value.borderColor})},[l("div",{class:s(e.$style.controls)},[l("div",{class:s(e.$style.controlGroup)},[l("label",{for:`ram-select-${Math.random()}`,class:s(e.$style.controlGroupLabel)},"RAM (GB)",10,ro),z(l("select",{id:`ram-select-${Math.random()}`,"onUpdate:modelValue":o[0]||(o[0]=t=>y.value=t),class:s(e.$style.controlGroupSelect)},[(v(!0),i(K,null,X(T.ramOptions,t=>(v(),i("option",{key:t,value:t},d(t),9,mo))),128))],10,uo),[[j,y.value,void 0,{number:!0}]])],2),l("div",{class:s(e.$style.controlGroup)},[l("label",{for:`vram-select-${Math.random()}`,class:s(e.$style.controlGroupLabel)},"VRAM (GB)",10,co),z(l("select",{id:`vram-select-${Math.random()}`,"onUpdate:modelValue":o[1]||(o[1]=t=>p.value=t),class:s(e.$style.controlGroupSelect)},[(v(!0),i(K,null,X(T.vramOptions,t=>(v(),i("option",{key:t,value:t},d(t),9,vo))),128))],10,io),[[j,p.value,void 0,{number:!0}]])],2),l("div",{class:s(e.$style.contextControlGroup)},[l("label",{class:s(e.$style.contextControlLabel)},"Context Size: "+d(h.value)+" tokens",3),l("div",{class:s(e.$style.contextSliderContainer)},[l("div",{class:s(e.$style.contextSliderWrapper)},[z(l("input",{type:"range",min:0,max:S.value.length-1,"onUpdate:modelValue":o[2]||(o[2]=t=>H.value=t),class:s(e.$style.contextSlider)},null,10,yo),[[he,H.value,void 0,{number:!0}]])],2)],2)],2)],2),l("div",{class:s(e.$style.result)},[l("strong",{class:s(e.$style.resultStrong)},"Recommended model:",2),l("span",{class:s([e.$style.modelName,C.value.recommendedSuccess?e.$style.modelNameRecommendedSuccess:"",C.value.recommendedCaution?e.$style.modelNameRecommendedCaution:"",C.value.recommendedWarning?e.$style.modelNameRecommendedWarning:"",C.value.notRecommended?e.$style.modelNameNotRecommended:"",n.value.hasGlow&&n.value.usefulness===1?e.$style.modelNameGlow:"",n.value.hasGlow&&n.value.usefulness===0?e.$style.modelNameNoMatch:""]),style:Z({backgroundColor:n.value.bg,color:n.value.color,borderColor:n.value.borderColor})},[J(d(n.value.formattedModel||n.value.model)+" ",1),Q(n.value.formattedModel)?(v(),i("span",po,"(includes Vision)")):$("",!0)],6),O.value?(v(),i("a",{key:0,href:O.value,target:"_blank",class:s(e.$style.lmstudioButton)}," Use in LMStudio ",10,go)):$("",!0),n.value.plausibleModels&&n.value.plausibleModels.length>0?(v(),i("div",{key:1,class:s(e.$style.details)},[l("small",null,"Also considered: "+d(n.value.plausibleModels.join(", ")),1)],2)):$("",!0),n.value.details?(v(),i("div",{key:2,class:s(e.$style.details)},[l("small",null," Parameters: "+d(n.value.details.parameters?n.value.details.parameters+"B":"(unknown)")+" | Quantization: "+d(n.value.details.quantization?n.value.details.quantization.toUpperCase():"(unknown)")+" | Model Memory Impact: "+d(w.value.toFixed(1))+" GB ",1)],2)):$("",!0)],2),n.value.details?(v(),i("div",{key:0,class:s(e.$style.contextDetails)},[o[3]||(o[3]=l("strong",null,"Context Overhead:",-1)),J(" "+d(x.value.toFixed(2))+"GB (based on "+d(h.value.toLocaleString())+" token context) ",1),o[4]||(o[4]=l("br",null,null,-1)),o[5]||(o[5]=l("small",null,'Note: The size of context in GB is an estimate that shows the "worst case". It may be smaller in actual use, but is assumed to be higher for safely assessing upper bounds.',-1))],2)):$("",!0),n.value.details?(v(),i("div",{key:1,class:s([e.$style.memorySection,q.value||E.value?e.$style.memoryWarningBox:""])},[l("table",{class:s(e.$style.memoryTable)},[l("thead",null,[l("tr",null,[l("th",{class:s(e.$style.memoryTypeHeader)},null,2),o[6]||(o[6]=l("th",null,"Total",-1)),o[7]||(o[7]=l("th",null,"Context",-1)),o[8]||(o[8]=l("th",null,"Model",-1)),o[9]||(o[9]=l("th",null,"Leftover",-1))])]),l("tbody",null,[l("tr",null,[l("td",{class:s(e.$style.memoryTypeHeader)},"RAM",2),l("td",{class:s(e.$style.memoryValue)},d((Number(y.value)||0).toFixed(2))+"GB",3),l("td",{class:s(e.$style.memoryValue)},d(ge.value)+"GB",3),l("td",{class:s(e.$style.memoryValue)},d(ye.value)+"GB",3),l("td",{class:s([e.$style.memoryValue,E.value?e.$style.warning:""])},d((Number(ie.value)||0).toFixed(2))+"GB",3)]),l("tr",null,[l("td",{class:s(e.$style.memoryTypeHeader)},"VRAM",2),l("td",{class:s(e.$style.memoryValue)},d((Number(p.value)||0).toFixed(2))+"GB",3),l("td",{class:s(e.$style.memoryValue)},d(pe.value)+"GB",3),l("td",{class:s(e.$style.memoryValue)},d(ve.value)+"GB",3),l("td",{class:s([e.$style.memoryValue,q.value?e.$style.warning:""])},d((Number(ce.value)||0).toFixed(2))+"GB",3)])])],2)],2)):$("",!0)],6))}},_o={$style:so},Mo=fe(ho,[["__cssModules",_o]]);export{Mo as M};
